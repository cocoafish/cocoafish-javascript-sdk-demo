(function(a){a.cors=function(b){b.success=b.success||function(c,d){alert("no success callback specified")};b.error=b.error||function(e,d,c){alert("no fail callback specified")};a.ajax(b)};a.corsSetup=function(b){a.ajaxSetup(b)};a.getCORS=function(c,e,g,d,f,b){options={url:c,type:"GET",data:e,success:g,dataType:d,error:g,headers:f,xhrFields:b};a.cors(options)};a.postCORS=function(c,e,g,d,f,b){options={url:c,type:"POST",data:e,success:g,dataType:d,error:g,headers:f,xhrFields:b};a.cors(options)};a.putCORS=function(c,e,g,d,f,b){options={url:c,type:"PUT",data:e,success:g,dataType:d,error:g,headers:f,xhrFields:b};a.cors(options)};a.deleteCORS=function(c,e,g,d,f,b){options={url:c,type:"DELETE",data:e,success:g,dataType:d,error:g,headers:f,xhrFields:b};a.cors(options)};a.postCORSWithFile=function(c,e,g,d,f,b){options={url:c,type:"POST",data:e,success:g,dataType:d,error:g,headers:f,cache:false,contentType:false,processData:false,xhrFields:b};a.cors(options)};a.postJSON=function(b,c,d){a.ajaxSetup({contentType:"application/json; charset=utf-8"});a.postCORS(b,JSON.stringify(c),d,"json")};a.putJSON=function(b,c,d){a.ajaxSetup({contentType:"application/json; charset=utf-8"});a.putCORS(b,JSON.stringify(c),d,"json")};a.deleteJSON=function(b,c,d){a.deleteCORS(b,c,d,"json")};a.corsJSON=function(d,c,e,f,b){a.ajaxSetup({error:b,contentType:"application/json; charset=utf-8"});a.cors({type:d,url:c,data:e,dataType:"json",success:f,error:b})}})(jQuery);$.ajaxTransport("+*",function(b,d,c){if(jQuery.browser.msie&&window.XDomainRequest){var a;return{send:function(g,f){a=new XDomainRequest();if(b.type=="PUT"||b.type=="DELETE"){var e="_method="+b.type;if(b.data){b.data+="&"+e}else{b.data=e}b.type="POST"}a.open(b.type,b.url);a.onload=function(){if(this.contentType.match(/\/xml/)){var h=new ActiveXObject("Microsoft.XMLDOM");h.async=false;h.loadXML(this.responseText);f(200,"success",[h])}else{f(200,"success",[this.responseText])}};a.ontimeout=function(){f(408,"error",["Request timed out."])};a.onerror=function(){f(404,"error",["The requested resource could not be found."])};a.send(b.data)},abort:function(){if(a){a.abort()}}}}});jQuery.proxy_xmlhttp=function(v){var e=1500;var h=v||"http://"+window.location.hostname+"/xmlhttp/";this.status=null;this.statusText=null;this.responseText=null;this.responseXML=null;this.synchronous=false;this.readyState=0;this.onreadystatechange=function(){};this.onerror=function(){};this.onload=function(){};this.abort=function(){j=true;t()};this.getAllResponseHeaders=function(){var z="";for(var A in s){z+=A+": "+s[A]+"\r\n"}return z};this.getResponseHeader=function(z){for(var A in s){if(A.toLowerCase()==z.toLowerCase()){return s[A]}}return null};this.overrideMimeType=function(z){i=z};this.open=function(D,A,B,C,z){if(!u(D,A)){return}n=(D)?D:"";k=(A)?A:"";r=(C)?C:"";g=(z)?z:"";b(1)};this.openRequest=function(D,A,B,C,z){return this.open(D,A,B,C,z)};this.send=function(z){if(j){return}var A=m(z);y(A)};this.setRequestHeader=function(z,B){if(j){return}for(var A in d){if(A.toLowerCase()==z.toLowerCase()){d[A]=B;return}}d[z]=B};var n="";var k="";var r="";var g="";var d={"HTTP-Referer":escape(document.location),"Content-Type":"application/x-www-form-urlencoded"};var s={};var i="";var o=this;var c="";var p=[];var j=false;var f=function(z){o.onerror(z);o.abort();return false};var m=function(C){if(!C){C=""}var A="";for(var I in d){A+=I+"="+d[I]+"&"}var H=n+"$"+c+"$"+r+"$"+g+"$"+A+"$"+a(C)+"$"+k;var z=H;var G=e,B=[];var F=Math.floor(z.length/G),D=0;while(z.length>0){var E=h+"?multipart$"+c+"$"+D+++"$"+F+"$"+z.substr(0,G);B.push(E);z=z.substr(G)}if(B.length==1){z=h+"?"+H}else{z=B}return z};var u=function(A,z){if(!A){return f("Please, specify the query method (GET, POST or HEAD)")}if(!z){return f("Please, specify the URL")}if(A.toLowerCase()!="get"&&A.toLowerCase()!="post"&&A.toLowerCase()!="put"&&A.toLowerCase()!="delete"&&A.toLowerCase()!="options"&&A.toLowerCase()!="head"){return f("Please, specify either a GET, POST or a HEAD method")}if(z.toLowerCase().substr(0,7)!="http://"){return f("Only HTTP protocol is supported (http://)")}return true};var y=function(B){if("object"==typeof B){for(var A=0;A<B.length;A++){y(B[A])}return true}var z=document.createElement("script");z.src=B;z.type="text/javascript";if(navigator.userAgent.indexOf("Safari")){z.charset="utf-8"}z=document.getElementsByTagName("head")[0].appendChild(z);p.push(z);return z};var a=function(z){z=escape(z);z=z.replace("+","%2B");return z};var t=function(){for(var z=0;z<p.length;z++){if(p[z].parentNode){p[z].parentNode.removeChild(p[z])}}};var l=function(){c="v"+Math.random().toString().substr(2);window[c]=o};var b=function(z){o.readyState=z;o.onreadystatechange();if(z==4){o.onload()}};var q=function(){var A=o.getResponseHeader("Content-type")+i;if(!(A.indexOf("html")>-1||A.indexOf("xml")>-1)){return}var z;if(document.implementation&&document.implementation.createDocument&&navigator.userAgent.indexOf("Opera")==-1){var B=new DOMParser();z=B.parseFromString(o.responseText,"text/xml");o.responseXML=z}else{if(window.ActiveXObject){z=new ActiveXObject("MSXML2.DOMDocument.3.0");if(z.loadXML(o.responseText)){o.responseXML=z}}else{z=document.body.appendChild(document.createElement("div"));z.style.display="none";z.innerHTML=o.responseText;x(z,true);o.responseXML=z.childNodes[0];document.body.removeChild(z)}}};var x=function(B,z){var A=B.childNodes.length;if(A===0){return}do{var C=B.childNodes[--A];if(C.nodeType==3&&!w(C.nodeValue)){B.removeChild(C)}if(C.nodeType==1&&z){x(C,true)}}while(A>0)};var w=function(z){z=z.replace("\r","");z=z.replace("\n","");z=z.replace(" ","");return(z.length===0)?false:true};this._parse=function(z){if(j){return true}if(z.multipart){return true}if(!z.success){return f(z.description)}s=z.responseHeaders;this.status=z.status;this.statusText=z.statusText;this.responseText=z.responseText;q();t();b(4);return true};l()};(function(a,e){if(a.cleanData){var d=a.cleanData;a.cleanData=function(b){for(var h=0,g;(g=b[h])!=null;h++){try{a(g).triggerHandler("remove")}catch(f){}}d(b)}}else{var c=a.fn.remove;a.fn.remove=function(b,f){return this.each(function(){if(!f){if(!b||a.filter(b,[this]).length){a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(g){}})}}return c.call(a(this),b,f)})}}a.widget=function(b,j,i){var h=b.split(".")[0],g;b=b.split(".")[1];g=h+"-"+b;if(!i){i=j;j=a.Widget}a.expr[":"][g]=function(f){return !!a.data(f,b)};a[h]=a[h]||{};a[h][b]=function(f,k){arguments.length&&this._createWidget(f,k)};j=new j;j.options=a.extend(true,{},j.options);a[h][b].prototype=a.extend(true,j,{namespace:h,widgetName:b,widgetEventPrefix:a[h][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},i);a.widget.bridge(b,a[h][b])};a.widget.bridge=function(b,f){a.fn[b]=function(k){var j=typeof k==="string",i=Array.prototype.slice.call(arguments,1),g=this;k=!j&&i.length?a.extend.apply(null,[true,k].concat(i)):k;if(j&&k.charAt(0)==="_"){return g}j?this.each(function(){var l=a.data(this,b),h=l&&a.isFunction(l[k])?l[k].apply(l,i):l;if(h!==l&&h!==e){g=h;return false}}):this.each(function(){var h=a.data(this,b);h?h.option(k||{})._init():a.data(this,b,new f(k,this))});return g}};a.Widget=function(b,f){arguments.length&&this._createWidget(b,f)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,g){a.data(g,this.widgetName,this);this.element=a(g);this.options=a.extend(true,{},this.options,this._getCreateOptions(),b);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,g){var f=b;if(arguments.length===0){return a.extend({},this.options)}if(typeof b==="string"){if(g===e){return this.options[b]}f={};f[b]=g}this._setOptions(f);return this},_setOptions:function(b){var f=this;a.each(b,function(h,g){f._setOption(h,g)});return this},_setOption:function(b,f){this.options[b]=f;if(b==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,j,i){var h=this.options[b];j=a.Event(j);j.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();i=i||{};if(j.originalEvent){b=a.event.props.length;for(var g;b;){g=a.event.props[--b];j[g]=j.originalEvent[g]}}this.element.trigger(j,i);return !(a.isFunction(h)&&h.call(this.element[0],j,i)===false||j.isDefaultPrevented())}}})(jQuery);(function(a){a.widget("blueimp.fileupload",{options:{namespace:undefined,dropZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,formData:function(b){return b.serializeArray()},add:function(c,b){b.submit()},processData:false,contentType:false,cache:false},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(b){var c="undefined";return !b.forceIframeTransport&&typeof XMLHttpRequestUpload!==c&&typeof File!==c&&(!b.multipart||typeof FormData!==c)},_getFormData:function(b){var c;if(typeof b.formData==="function"){return b.formData(b.form)}else{if(a.isArray(b.formData)){return b.formData}else{if(b.formData){c=[];a.each(b.formData,function(d,e){c.push({name:d,value:e})});return c}}}return[]},_getTotal:function(c){var b=0;a.each(c,function(d,e){b+=e.size||1});return b},_onProgress:function(f,d){if(f.lengthComputable){var c=d.total||this._getTotal(d.files),b=parseInt(f.loaded/f.total*(d.chunkSize||c),10)+(d.uploadedBytes||0);this._loaded+=b-(d.loaded||d.uploadedBytes||0);d.lengthComputable=true;d.loaded=b;d.total=c;this._trigger("progress",f,d);this._trigger("progressall",f,{lengthComputable:true,loaded:this._loaded,total:this._total})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload&&d.upload.addEventListener){d.upload.addEventListener("progress",function(f){c._onProgress(f,b)},false);b.xhr=function(){return d}}},_initXHRData:function(b){var d,c=b.files[0];if(!b.multipart||b.blob){b.headers=a.extend(b.headers,{"X-File-Name":c.name,"X-File-Type":c.type,"X-File-Size":c.size});if(!b.blob){b.contentType=c.type;b.data=c}else{if(!b.multipart){b.contentType="application/octet-stream";b.data=b.blob}}}if(b.multipart&&typeof FormData!=="undefined"){if(b.formData instanceof FormData){d=b.formData}else{d=new FormData();a.each(this._getFormData(b),function(e,f){d.append(f.name,f.value)})}if(b.blob){d.append(b.paramName,b.blob)}else{a.each(b.files,function(e,f){if(f instanceof Blob){d.append(b.paramName,f)}})}b.data=d}b.blob=null},_initIframeSettings:function(b){b.dataType="iframe "+(b.dataType||"");b.formData=this._getFormData(b)},_initDataSettings:function(b){if(this._isXHRUpload(b)){if(!this._chunkedUpload(b,true)){if(!b.data){this._initXHRData(b)}this._initProgressListener(b)}}else{this._initIframeSettings(b)}},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop("form"))}if(!b.paramName){b.paramName=b.fileInput.prop("name")||"files[]"}if(!b.url){b.url=b.form.prop("action")||location.href}b.type=(b.type||b.form.prop("method")||"").toUpperCase();if(b.type!=="POST"&&b.type!=="PUT"){b.type="POST"}},_getAJAXSettings:function(c){var b=a.extend({},this.options,c);this._initFormSettings(b);this._initDataSettings(b);return b},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(e,d,c){var b=a.Deferred(),f=b.promise();d=d||this.options.context||f;if(e===true){b.resolveWith(d,c)}else{if(e===false){b.rejectWith(d,c)}}f.abort=b.promise;return this._enhancePromise(f)},_chunkedUpload:function(m,i){var h=this,f=m.files[0],g=f.size,b=m.uploadedBytes=m.uploadedBytes||0,e=m.maxChunkSize||g,k=f.webkitSlice||f.mozSlice||f.slice,l,c,j,d;if(!(this._isXHRUpload(m)&&k&&(b||e<g))||m.data){return false}if(i){return true}if(b>=g){f.error="uploadedBytes";return this._getXHRPromise(false)}c=Math.ceil((g-b)/e);l=function(n){if(!n){return h._getXHRPromise(true)}return l(n-=1).pipe(function(){var p=a.extend({},m);p.blob=k.call(f,b+n*e,b+(n+1)*e);p.chunkSize=p.blob.size;h._initXHRData(p);h._initProgressListener(p);j=(a.ajax(p)||h._getXHRPromise(false,p.context)).done(function(){if(!p.loaded){h._onProgress(a.Event("progress",{lengthComputable:true,loaded:p.chunkSize,total:p.chunkSize}),p)}m.uploadedBytes=p.uploadedBytes+=p.chunkSize});return j})};d=l(c);d.abort=function(){return j.abort()};return this._enhancePromise(d)},_beforeSend:function(c,b){if(this._active===0){this._trigger("start")}this._active+=1;this._loaded+=b.uploadedBytes||0;this._total+=this._getTotal(b.files)},_onDone:function(b,e,d,c){if(!this._isXHRUpload(c)){this._onProgress(a.Event("progress",{lengthComputable:true,loaded:1,total:1}),c)}c.result=b;c.textStatus=e;c.jqXHR=d;this._trigger("done",null,c)},_onFail:function(c,e,d,b){b.jqXHR=c;b.textStatus=e;b.errorThrown=d;this._trigger("fail",null,b);if(b.recalculateProgress){this._loaded-=b.loaded||b.uploadedBytes||0;this._total-=b.total||this._getTotal(b.files)}},_onAlways:function(b,f,d,e,c){this._active-=1;c.result=b;c.textStatus=f;c.jqXHR=d;c.errorThrown=e;this._trigger("always",null,c);if(this._active===0){this._trigger("stop");this._loaded=this._total=0}},_onSend:function(i,g){var f=this,d,j,c,b=f._getAJAXSettings(g),h=function(k,e){f._sending+=1;d=d||((k!==false&&f._trigger("send",i,b)!==false&&(f._chunkedUpload(b)||a.ajax(b)))||f._getXHRPromise(false,b.context,e)).done(function(l,n,m){f._onDone(l,n,m,b)}).fail(function(l,n,m){f._onFail(l,n,m,b)}).always(function(m,l,o){f._sending-=1;if(o&&o.done){f._onAlways(m,l,o,undefined,b)}else{f._onAlways(undefined,l,m,o,b)}if(b.limitConcurrentUploads&&b.limitConcurrentUploads>f._sending){var n=f._slots.shift();while(n){if(!n.isRejected()){n.resolve();break}n=f._slots.shift()}}});return d};this._beforeSend(i,b);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){j=a.Deferred();this._slots.push(j);c=j.pipe(h)}else{c=(this._sequence=this._sequence.pipe(h,h))}c.abort=function(){var e=[undefined,"abort","abort"];if(!d){if(j){j.rejectWith(e)}return h(false,e)}return d.abort()};return this._enhancePromise(c)}return h()},_onAdd:function(g,f){var d=this,b=true,c=a.extend({},this.options,f);if(c.singleFileUploads&&this._isXHRUpload(c)){a.each(f.files,function(e,h){var i=a.extend({},f,{files:[h]});i.submit=function(){return d._onSend(g,i)};return(b=d._trigger("add",g,i))});return b}else{if(f.files.length){f=a.extend({},f);f.submit=function(){return d._onSend(g,f)};return this._trigger("add",g,f)}}},_normalizeFile:function(b,c){if(c.name===undefined&&c.size===undefined){c.name=c.fileName;c.size=c.fileSize}},_replaceFileInput:function(b){var c=b.clone(true);a("<form></form>").append(c)[0].reset();b.after(c).detach();this.options.fileInput=this.options.fileInput.map(function(d,e){if(e===b[0]){return c[0]}return e})},_onChange:function(d){var b=d.data.fileupload,c={files:a.each(a.makeArray(d.target.files),b._normalizeFile),fileInput:a(d.target),form:a(d.target.form)};if(!c.files.length){c.files=[{name:d.target.value.replace(/^.*\\/,"")}]}if(c.form.length){c.fileInput.data("blueimp.fileupload.form",c.form)}else{c.form=c.fileInput.data("blueimp.fileupload.form")}if(b.options.replaceFileInput){b._replaceFileInput(c.fileInput)}if(b._trigger("change",d,c)===false||b._onAdd(d,c)===false){return false}},_onDrop:function(f){var b=f.data.fileupload,d=f.dataTransfer=f.originalEvent.dataTransfer,c={files:a.each(a.makeArray(d&&d.files),b._normalizeFile)};if(b._trigger("drop",f,c)===false||b._onAdd(f,c)===false){return false}f.preventDefault()},_onDragOver:function(d){var b=d.data.fileupload,c=d.dataTransfer=d.originalEvent.dataTransfer;if(b._trigger("dragover",d)===false){return false}if(c){c.dropEffect=c.effectAllowed="copy"}d.preventDefault()},_initEventHandlers:function(){var b=this.options.namespace||this.name;this.options.dropZone.bind("dragover."+b,{fileupload:this},this._onDragOver).bind("drop."+b,{fileupload:this},this._onDrop);this.options.fileInput.bind("change."+b,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var b=this.options.namespace||this.name;this.options.dropZone.unbind("dragover."+b,this._onDragOver).unbind("drop."+b,this._onDrop);this.options.fileInput.unbind("change."+b,this._onChange)},_beforeSetOption:function(b,c){this._destroyEventHandlers()},_afterSetOption:function(c,d){var b=this.options;if(!b.fileInput){b.fileInput=a()}if(!b.dropZone){b.dropZone=a()}this._initEventHandlers()},_setOption:function(b,d){var c=a.inArray(b,this._refreshOptionsList)!==-1;if(c){this._beforeSetOption(b,d)}a.Widget.prototype._setOption.call(this,b,d);if(c){this._afterSetOption(b,d)}},_create:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file")}else{if(!b.fileInput){b.fileInput=a()}}if(!b.dropZone){b.dropZone=a()}this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},destroy:function(){this._destroyEventHandlers();a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this);this._initEventHandlers()},disable:function(){this._destroyEventHandlers();a.Widget.prototype.disable.call(this)},add:function(b){if(!b||this.options.disabled){return}b.files=a.each(a.makeArray(b.files),this._normalizeFile);this._onAdd(null,b)},send:function(b){if(b&&!this.options.disabled){b.files=a.each(a.makeArray(b.files),this._normalizeFile);if(b.files.length){return this._onSend(null,b)}}return this._getXHRPromise(false,b&&b.context)}})}(jQuery));(function(b){var a=0;b.ajaxTransport("iframe",function(c,g,f){if(c.type==="POST"||c.type==="GET"){var e,d;return{send:function(i,h){e=b('<form style="display:none;"></form>');d=b('<iframe src="javascript:false;" name="iframe-transport-'+(a+=1)+'"></iframe>').bind("load",function(){var j;var k=function(m){if(m.data){var l;try{l=m.data;if(!l.length){throw new Error()}}catch(n){l=undefined}h(200,"success",{iframe:l});b('<iframe src="javascript:false;"></iframe>').appendTo(e);e.remove()}};if(typeof window.addEventListener!="undefined"){window.addEventListener("message",k,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onmessage",k)}}d.unbind("load").bind("load",function(){});e.prop("target",d.prop("name")).prop("action",c.url).prop("method",c.type);if(c.formData){b.each(c.formData,function(l,m){b('<input type="hidden"/>').prop("name",m.name).val(m.value).appendTo(e)})}if(c.fileInput&&c.fileInput.length&&c.type==="POST"){j=c.fileInput.clone();c.fileInput.after(function(l){return j[l]});if(c.paramName){c.fileInput.each(function(){b(this).prop("name",c.paramName)})}e.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")}e.submit();if(j&&j.length){c.fileInput.each(function(m,l){var n=b(j[m]);b(l).prop("name",n.prop("name"));n.replaceWith(l)})}});e.append(d).appendTo("body")},abort:function(){if(d){d.unbind("load").prop("src","javascript".concat(":false;"))}if(e){e.remove()}}}}});b.ajaxSetup({converters:{"iframe text":function(c){return c.text()},"iframe json":function(c){return b.parseJSON(c)},"iframe html":function(c){return c.find("body").html()},"iframe script":function(c){return b.globalEval(c.text())}}})}(jQuery));function Cocoafish(a){if(arguments.length==1){return new CocoafishWithKey(a)}}function CocoafishWithKey(a){this.key=a}CocoafishWithKey.prototype.sendRequest=function(b,e,c,a,d){if(com.cocoafish.js.sdk.utils.checkAppKey(this)){com.cocoafish.js.sdk.sendRequest(this.key,b,e,c,a,d)}else{d(com.cocoafish.constants.noAppKeyError)}};var com;if(!com){com={}}if(!com.cocoafish){com.cocoafish={}}if(!com.cocoafish.constants){com.cocoafish.constants={}}if(!com.cocoafish.js){com.cocoafish.js={}}if(!com.cocoafish.js.sdk){com.cocoafish.js.sdk={}}if(!com.cocoafish.js.sdk.utils){com.cocoafish.js.sdk.utils={}}if(!com.cocoafish.sdk){com.cocoafish.sdk={}}if(!com.cocoafish.sdk.url){com.cocoafish.sdk.url={}}com.cocoafish.sdk.url.http="http://";com.cocoafish.sdk.url.https="https://";com.cocoafish.sdk.url.baseURL="api.cocoafish.com/v1/";com.cocoafish.constants.get_method="GET";com.cocoafish.constants.post_method="POST";com.cocoafish.constants.put_method="PUT";com.cocoafish.constants.delete_method="DELETE";com.cocoafish.constants.keyparam="?key=";com.cocoafish.constants.json="json";com.cocoafish.constants.sessionId="_session_id";com.cocoafish.constants.sessionCookieName="Cookie";com.cocoafish.constants.responseCookieName="Set-Cookie";com.cocoafish.constants.ie="MSIE";com.cocoafish.constants.file="file";com.cocoafish.constants.userId="user_id";com.cocoafish.constants.placeId="place_id";com.cocoafish.constants.suppressCode="suppress_response_codes";com.cocoafish.constants.photo="photo";com.cocoafish.constants.method="_method";com.cocoafish.constants.name="name";com.cocoafish.constants.value="value";com.cocoafish.constants.noAppKeyError={meta:{stat:"fail",code:409,message:"Application key is not provided."}};com.cocoafish.js.sdk.utils.getSessionParams=function(c){var a=com.cocoafish.constants.keyparam+c;var b=com.cocoafish.js.sdk.utils.getCookie(com.cocoafish.constants.sessionId);if(b){a+="&"+com.cocoafish.constants.sessionId+"="+b}return a};com.cocoafish.js.sdk.utils.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"MSIE",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};com.cocoafish.js.sdk.utils.BrowserDetect.init();com.cocoafish.js.sdk.utils.getCookie=function(a){var g=document.cookie.split(";");var c="";var e="";var f="";var d=false;var b="";for(b=0;b<g.length;b++){c=g[b].split("=");e=c[0].replace(/^\s+|\s+$/g,"");if(e==a){d=true;if(c.length>1){f=unescape(c[1].replace(/^\s+|\s+$/g,""))}return f;break}c=null;e=""}if(!d){return null}};com.cocoafish.js.sdk.utils.setCookie=function(c,e,a,h,d,g){var b=new Date();b.setTime(b.getTime());if(a){a=a*1000*60*60*24}var f=new Date(b.getTime()+(a));document.cookie=c+"="+escape(e)+((a)?";expires="+f.toGMTString():"")+((h)?";path="+h:"")+((d)?";domain="+d:"")+((g)?";secure":"")};com.cocoafish.js.sdk.utils.deleteCookie=function(a,c,b){if(com.cocoafish.js.sdk.utils.getCookie(a)){document.cookie=a+"="+((c)?";path="+c:"")+((b)?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};com.cocoafish.js.sdk.utils.checkAppKey=function(a){if(a){if(a.key){return true}}return false};com.cocoafish.js.sdk.utils.prepareFormData=function(c){if(window.FormData){var d=new FormData();if(c){for(prop in c){if(!c.hasOwnProperty(prop)){continue}if(prop==com.cocoafish.constants.photo||prop==com.cocoafish.constants.file){var a=c[prop];var b=document.getElementById(a);if(b&&b.files[0]){d.append(prop,b.files[0])}}else{d.append(prop,c[prop])}}}return d}};com.cocoafish.js.sdk.utils.prepareFormDataArray=function(c){var b=new Array();if(c){for(prop in c){if(!c.hasOwnProperty(prop)){continue}if(prop!=com.cocoafish.constants.photo&&prop!=com.cocoafish.constants.file){var a=new Object();a[com.cocoafish.constants.name]=prop;a[com.cocoafish.constants.value]=c[prop];b.push(a)}}}return b};com.cocoafish.js.sdk.utils.getPhotoObject=function(c){if(c){for(prop in c){if(!c.hasOwnProperty(prop)){continue}if(prop==com.cocoafish.constants.photo||prop==com.cocoafish.constants.file){var a=c[prop];var b=$("#"+a);return b}}}return null};com.cocoafish.js.sdk.utils.uploadMessageCallback=function(a){if(a&&a.data){return $.parseJSON(a.data)}else{return{}}};com.cocoafish.js.sdk.sendRequest=function(i,b,a,f,n,m){var e="";if(n){e+=com.cocoafish.sdk.url.https}else{e+=com.cocoafish.sdk.url.http}e+=com.cocoafish.sdk.url.baseURL+b+com.cocoafish.js.sdk.utils.getSessionParams(i);var c=function(p,o,r){if(p&&p.meta&&p.meta.session_id){var q=p.meta.session_id;com.cocoafish.js.sdk.utils.setCookie(com.cocoafish.constants.sessionId,q)}m(p)};var k=com.cocoafish.js.sdk.utils.getPhotoObject(f);if(k){if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.ie){var g=com.cocoafish.js.sdk.utils.prepareFormDataArray(f);var j={name:com.cocoafish.constants.suppressCode,value:true};g.push(j);var h=k.fileupload({dataType:com.cocoafish.constants.json,url:e,formData:function(o){return g},done:function(p,o){m(o.result)}});var l="";if(f.file){l=com.cocoafish.constants.file}else{if(f.photo){l=com.cocoafish.constants.photo}}k.prop(com.cocoafish.constants.name,l);h.fileupload("send",{files:[{name:l}]})}else{var d=com.cocoafish.js.sdk.utils.prepareFormData(f);d.append(com.cocoafish.constants.suppressCode,true);$.postCORSWithFile(e,d,c,com.cocoafish.constants.json,{},{withCredentials:true})}}else{if(f==null){f={}}f[com.cocoafish.constants.suppressCode]=true;if(a){if(a.toUpperCase()==com.cocoafish.constants.get_method){$.getCORS(e,f,c,com.cocoafish.constants.json)}else{if(a.toUpperCase()==com.cocoafish.constants.post_method){$.postCORS(e,f,c,com.cocoafish.constants.json,{},{withCredentials:true})}else{if(a.toUpperCase()==com.cocoafish.constants.put_method){$.putCORS(e,f,c,com.cocoafish.constants.json,{},{withCredentials:true})}else{if(a.toUpperCase()==com.cocoafish.constants.delete_method){$.deleteCORS(e,f,c,com.cocoafish.constants.json,{},{withCredentials:true})}}}}}}};